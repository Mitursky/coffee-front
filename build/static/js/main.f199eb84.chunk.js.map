{"version":3,"sources":["img/bg.png","img/story.png","App.js","reportWebVitals.js","index.js"],"names":["GROUP_ID","a","canvas","document","createElement","getContext","height","width","ctx","ref_id","window","location","hash","split","money","fonts","load","then","img","Image","src","story","font","textAlign","textBaseline","fillStyle","onload","drawImage","fillText","bridge","send","background_type","blob","toDataURL","locked","attachment","text","type","url","Object","assign","href","target","click","history","back","status","payload","name","Story","App","style","backgroundColor","justifyContent","display","bg","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","getElementById"],"mappings":"gNAAe,G,OAAA,IAA0B,gCCA1B,MAA0B,kC,OCSnCA,EAAW,U,4CAEjB,kCAAAC,EAAA,0DACQC,EAASC,SAASC,cAAc,WAC1BC,WAFd,wDAIEH,EAAOI,OAAS,KAChBJ,EAAOK,MAAQ,KACTC,EAAMN,EAAOG,WAAW,MACxBI,EAASC,OAAOC,SAASC,KAAKC,MAAM,WAAW,GAAGA,MAAM,KAAK,GAC7DC,EAAQJ,OAAOC,SAASC,KAAKC,MAAM,MAAM,GAAGA,MAAM,KAAK,GAR/D,mBAUUV,SAASY,MAAMC,KAAK,0BAA0BC,KAA9C,sBAAmD,4BAAAhB,EAAA,uDACnDiB,EAAM,IAAIC,OACVC,IAAMC,EACVb,EAAIc,KAAO,yBACXd,EAAIe,UAAY,SAChBf,EAAIgB,aAAe,MACnBhB,EAAIiB,UAAY,QAEhBP,EAAIQ,OAAS,WACXlB,EAAImB,UAAUT,EAAK,EAAG,GACtBV,EAAIoB,SAAJ,wEAA4Bd,EAA5B,wBAA0C,IAAK,KAC/CX,SAASY,MAAMC,KAAK,6BAA6BC,KAAjD,sBAAsD,iBAAAhB,EAAA,SAAAA,EAAA,sDACpDO,EAAIc,KAAO,4BACXd,EAAIoB,SAAS,yFAAoB,IAAK,KACtCC,IAAOC,KAAK,uBAAwB,CAClCC,gBAAiB,QACjBC,KAAM9B,EAAO+B,YACbC,QAAQ,EACRC,WAAY,CACVC,KAAM,QACNC,KAAM,MACNC,IAAI,uBAAD,OAAyBtC,EAAzB,gBAAyCS,MAM5CR,EAAIE,SAASC,cAAc,KAC/BmC,OAAOC,OAAOvC,EAAG,CACfwC,KAAM,mCACNC,OAAQ,WAEVzC,EAAE0C,QACFjC,OAAOkC,QAAQC,OACfhB,IAAOC,KAAK,gBAAiB,CAC3BgB,OAAQ,UACRC,QAAS,CAAEC,KAAM,UAzBiC,6CAXD,4CAV7D,qH,sBADAnB,IAAOC,KAAK,gB,mCAsDZmB,GAiBeC,MAhBf,WACE,OACE,qBACEC,MAAO,CACLC,gBAAiB,QACjBC,eAAgB,SAChBC,QAAS,OACT/C,MAAO,QACPD,OAAQ,SANZ,SASE,qBAAKc,IAAKmC,OChEDC,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBzC,MAAK,YAAkD,IAA/C0C,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCAdO,IAASC,OACP,cAAC,IAAD,UACE,cAAC,IAAD,UACE,cAAC,IAAD,UACE,cAAC,EAAD,UAIN9D,SAAS+D,eAAe,SAG1BV,M","file":"static/js/main.f199eb84.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/bg.995710f8.png\";","export default __webpack_public_path__ + \"static/media/story.dce672fd.png\";","import {} from \"@vkontakte/vkui\";\nimport { useState } from \"react\";\nimport {} from \"@vkontakte/icons\";\nimport React from \"react\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport \"@vkontakte/vkui/dist/vkui.css\";\nimport bg from \"./img/bg.png\";\nimport story from \"./img/story.png\";\n\nconst GROUP_ID = 213105633;\nbridge.send(\"VKWebAppInit\");\nasync function Story() {\n  const canvas = document.createElement(\"canvas\");\n  if (!canvas.getContext) return;\n\n  canvas.height = 1920;\n  canvas.width = 1080;\n  const ctx = canvas.getContext(\"2d\");\n  const ref_id = window.location.hash.split(\"ref_id=\")[1].split(\"&\")[0];\n  const money = window.location.hash.split(\"c=\")[1].split(\"&\")[0];\n  try {\n    await document.fonts.load('52pt \"Montserrat-Bold\"').then(async () => {\n      let img = new Image();\n      img.src = story;\n      ctx.font = '50pt \"Montserrat-Bold\"';\n      ctx.textAlign = \"center\";\n      ctx.textBaseline = \"top\";\n      ctx.fillStyle = \"white\";\n\n      img.onload = () => {\n        ctx.drawImage(img, 0, 0);\n        ctx.fillText(`Я заработал ${money} руб.`, 540, 870);\n        document.fonts.load('50pt \"Montserrat-Regular\"').then(async () => {\n          ctx.font = '50pt \"Montserrat-Regular\"';\n          ctx.fillText(\"на своей кофейне\", 540, 950);\n          bridge.send(\"VKWebAppShowStoryBox\", {\n            background_type: \"image\",\n            blob: canvas.toDataURL(),\n            locked: true,\n            attachment: {\n              text: \"go_to\",\n              type: \"url\",\n              url: `https://vk.me/public${GROUP_ID}?ref=${ref_id}`,\n            },\n          });\n\n          //https://vk.com/sheeproyale?mid=457232519#c=10000&ref_id=123123\n\n          let a = document.createElement(\"a\");\n          Object.assign(a, {\n            href: \"https://vk.com/im?sel=-213105633\",\n            target: \"_blank\",\n          });\n          a.click();\n          window.history.back();\n          bridge.send(\"VKWebAppClose\", {\n            status: \"success\",\n            payload: { name: \"test\" },\n          });\n        });\n      };\n    });\n  } catch (err) {}\n}\nStory();\nfunction App() {\n  return (\n    <div\n      style={{\n        backgroundColor: \"black\",\n        justifyContent: \"center\",\n        display: \"flex\",\n        width: \"100vw\",\n        height: \"100vh\",\n      }}\n    >\n      <img src={bg} />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { AdaptivityProvider, ConfigProvider, AppRoot } from \"@vkontakte/vkui\";\n\nReactDOM.render(\n  <ConfigProvider>\n    <AdaptivityProvider>\n      <AppRoot>\n        <App />\n      </AppRoot>\n    </AdaptivityProvider>\n  </ConfigProvider>,\n  document.getElementById(\"root\")\n);\n\nreportWebVitals();\n"],"sourceRoot":""}